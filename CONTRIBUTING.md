<!--
   SPDX-FileCopyrightText: 2021 Monaco F. J. <monaco@usp.br>
  
   SPDX-License-Identifier: GPL-3.0-or-later

   This file is part of SYSeg, available at https://gitlab.com/monaco/syseg.
-->

Contributing to SYSeg
==============================
 
 You are welcome and encouraged to contribute to SYSeg.

 These are a few guidelines.

 Contribution workflow
 ------------------------------

 The official SYSeg repository is at https://gitlab.com/monaco/syseg.
   
 To start contributing:


 0. Read the essential documentation thoroughly:

    - `docs/syseg.md`    (SYSeg manual)
    - `CONTRIBUTING.md`  (this file)

 1. Open an issue at the repository explaining the problem
 
    or suggestion you are addressing.

 2. If you want to contribute a solution for your (or anyone else's) issue:

    * fork the project
    * create a branch for the issue
    * edit the code/documentation in that branch
    * Run lint check (see below)
    * commit and push your branch
    * go to SYSeg repo and create a PR/MR request

    Do not submit a PR/MR that is not related to an open issue.

 3. Go have a coffee, or a beer, as you truly deserve it.

 Developer tools
 ------------------------------

 SYSeg provide developers with a set of helper tools to assist you in the
 development process. They can be found in directory `tools`.

 To work properly, helper tools require that you have Git installed and
 properly configured, in special:

 ```
   git config [--global] user.name  <your name>
   git config [--global] user.email <your-email>
 ```
 SYSeg uses Git under the hood to perform some tasks.

 * Available tools:

   - `syseg-newfile`    creates a new file in your project
   - `syseg-export`     copy a source file from SYSeg into your project
   - `syseg-reuse`      annotate copyright and license information

 * To create a new file:

   `tools/syseg-newfile <file-name>`

   The script should create the file, add some comments and, possibly, some
   boilerplate code based on the file type (i.e. the file-name extension).
   It will also annotate the file with copyright and licensing
   information accordingly.
   
 * To perform a lint check to check REUSE compliance (before committing):

   `tools/syseg-reuse -L`

   Make sure that it passes all the tests before committing.

 * To export a file from SYSeg to another project:

   `tools/syseg-export <file-name> <destination-path>`

    The script should copy the files and perform any necessary change.

 * The following script may be used by the use to create a stand-alone
   bundle containing a modified copy of a proposed exercise, modified to
   work outside the SYSeg source tree.

   `tools/syseg-project <destination path>`

 Use option `-h` for help.

 Code convention
 ------------------------------

 Oh, that.

 Code convention always tend to be a sensitive topic among programmers as it calls
 forth personal convictions and the weight of beloved traditions. As often,
 preferences vary largely. With that, we humbly as you to be indulgent about the
 choices made in this project.
 
 * Symbol names, comments, file names etc. in English.

 * For C code, we stick with the tradition: snake case, with symbols (variables
   and function names) in lowercase, and macros in uppercase. We use exclusively
   C multi-line comments. Filenames in lowercase.

 * Version suffix according to semantic versioning [3] schema.

 * Examples in C should use only the native runtime POSI-C library; no
   third-party libraries (exceptions may be discussed, but have not being
   needed as yet).

 * Blocks open in the next line for both functions and flow control statements
   (yes, I know, I know...)

 * File extensions:

   -`hex`  ASCII file containing values in hexadecimal representation;

   -`asm`  manually written assembly code in Intel ASM format;

   -`S`    manually written assembly code in AT&T Gas format;

   -`s`    assembly code in AT&T Gas format generated by the compiler (GCC);

   -`o`    object code produced by the assembler;

   -`i`    pre-processed source code generated by the pre-processor (CPP)

   -`bin`  flat-binary file generated by the linker;

   -`iso`  ISO9660 (ECMA-119) file system intended for optical disk media (CD) 

   -`ld`   linker script.

 Development-stage suffixes:

   - `-alpha`       wrong or incomplete implementation to exemplify problems
   - `-beta`        working example, but suboptimal or inelegant implementation
   - `(no suffix)`  working (hopefully), intended implementation

 * Comments are text. Use caption and punctuation accordingly.

 Contribution licensing
 ------------------------------

 If you have substantially modified an existing source or documentation
 file --- say it's considerably more than a simple typo correction or
 small bug fix --- you are entitled to have your name added to the copyright
 notice [1] and to the `AUTHORS` file, should you desire.

 By submitting your contribution you agree that it will be available under the
 same license as SYSeg (GNU GPL vr. 3 or later).

 Code of conduct
 ------------------------------

 Be considerate and inclusive face diversity.

 I have a matter.
 ------------------------------

 ..it happens.

 SYSeg is a work in progress and, as such, may contain suboptimal code and
 potential innacuracy in technical explanations resulting of reliance on
 imprecise or misleading references. If you ever detect one such problem,
 it would be great if you could drop the author a note.

 If it is not much trouble, please open an issue at the repository and
 apply it the lable 'matter'. Then, explain what should be improved.

 Well, if you are in the mood of submitting a PR/MR, that would be great!


 Project standards
 ------------------------------

 To keep things consistent, when applicable, we aim at some some standards.

 - REUSE specification vr. 3 [1]
 
 - GitFlow branching strategy [2]

 - Semantic versioning 2.0.0 [3]

 CONTRIBUTION PURPOSE
 ------------------------------

 When applicable, use one of the following keywords to describe the purpose
 of your contribution:

 - `fix`   :   fixes a bug or unmeant requirement 
 - `feat`  :   adds or modify a feature
 - `doc`   :   modify or extend documentation
 - `hot`   :   modifies the stable branch
 - `tidy`  :   performs repository maintenance
 - `wip`   :   temporary, work-in-progress branch
 - `minor` :   very small ad hoc changes for cosmetic purposes
 - `duty`  :   ad hoc change handled outside the regular protocols


 SUPPORT BRANCH NAMING (for PR/MR requests)

 When creating a support branch to address an issue, name the branch
 
  `<purpose>/<issue number>/<short-descriptive-mnemonic>`

 where `purpose` (in lowercase) is one of the types described above.
 
 It's usually preferrable that the PR/MR be linked to an existing issue.
 Sometimes, however, we admit that ad hoc changes may be pragmatically
 justifiable. In this case, if the PR/MR is not linked to an issue,
 the simplified form
 
  `<purpose>/<short-descriptive-mnemonic>`

 is acceptable (this is most appropriate for 'duty' and 'minor' change types).

 Types 'duty' and 'minor' are reserved for project maintainers (with repository
 write permission), and are elegible, at the discretion of the maintainer, to
 bypass the regular PR/MR protocol and be merged directly in to the development
 branch --- other types can also be directly merged under exceptional
 circumnstances. 
 

 COMMIT MESSAGES

 We suggest a lax version of the ideas outlined in Conventional
 Commits [4], but using a more informal, fluid approach. 

 The suggested format for messages is

 `<Purpose> : Short description`

 where the 'purpose' (with first letter in capital) is one of the contribution
 purposes listed above.

 The short description should be in imperative form (fix, add, remove etc.)
 rather than past (fixed, added) or present (fixes, adds) --- as if ordering
 what the change should do.  

 Ideally, each commit should be of only one type. In practice, though,
 it's reasonable to group changes in a single commit for efficiency,
 specially when those are related. In those cases, it's ok to use

 ```
  <purpose 1> : Short description 1
  <purpose 2> : Short description 2
  ...
 ```

 Purpose indication in commit messages is suggested, but not mandatory.

 If it helps to understand the context, do not refrain from adding a
 paragraph further explaining the commit.


 OTHER CONVENTIONS

 Compliance to Keep a ChangeLog [5] is under consideration.


 References
 ------------------------------

 [1] REUSE Software, https://reuse.software

 [2] GitFlow, https://nvie.com/posts/a-successful-git-branching-model/

 [3] Semantic Versioning, https://semver.org/

 [4] Conventional Commits, https://www.conventionalcommits.org/en/v1.0.0/

 [5] Keep a ChangeLog, https://keepachangelog.com/en/1.0.0/

