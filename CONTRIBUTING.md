<!--
   SPDX-FileCopyrightText: 2021 Monaco F. J. <monaco@usp.br>
  
   SPDX-License-Identifier: GPL-3.0-or-later

   This file is part of SYSeg, available at https://gitlab.com/monaco/syseg.
-->

Contributing to SYSeg
==============================
 
 You are welcome and encouraged to contribute to SYSeg.

 These are a few guidelines.

 Contribution workflow
 ------------------------------

 The official SYSeg repository is at https://gitlab.com/monaco/syseg.
   
 To start contributing:


 0. Read the essential documentation thoroughly:

    - `docs/syseg.md`    (SYSeg manual)
    - `CONTRIBUTING.md`  (this file)

 1. Open an issue at the repository explaining the problem
 
    or suggestion you are addressing.

 2. If you want to contribute a solution for your (or anyone else's) issue:

    * fork the project
    * create a branch for the issue
    * edit the code/documentation in that branch
    * Run lint check (see below)
    * commit and push your branch
    * go to SYSeg repo and create a PR/MR request

    Do not submit a PR/MR that is not related to an open issue.

 3. Go have a coffee, or a beer, or wine, because you deserve it.

 Developer tools
 ------------------------------

 The developer tools require that you have Git installed and configured:

 ```
   git config [--global] user.name  <your name>
   git config [--global] user.email <your-email>
 ```
 SYSeg uses Git under the hood to perform some tasks.

 * Quick intro:

   - `syseg-newfile`    creates a new file in your project
   - `syseg-export`     copy a source file from SYSeg into your project
   - `syseg-reuse`      annotate copyright and license information

 * To create a new file:

   `tools/syseg-newfile <file-name>`

   The script should create the file, add some comments and, possibly, some
   boilerplate code based on the file type (i.e. the file-name extension).

 * To perform a lint check to check REUSE compliance (before committing):

   `tools/syseg-reuse -L`


 Code convention
 ------------------------------

 Oh, that.

 Code convention always tend to be a sensitive topic among programmers as it calls
 forth personal convictions and the weight of beloved traditions. An often,
 preferences vary largely. With that, please try go easy with the choices made
 in this project.
 
 * Symbol names, comments, file names etc. in English.

 * For C code, we stick with snake case, with symbols (variables and function
   names) in lowercase, and macros in uppercase. We use exclusively C multi-line
   comments. Filenames in snake lowercase, with version suffix according to
   semantic versioning schema.

 * Examples should use only the native runtime C library; no third-party
   libraries (exceptions may be discussed, but have not being needed as yet).

 * Blocks open in the next line for both functions and flow control statements
   (yes, I know, I know...)

 * File extensions:

   -`hex`  ASCII file containing values in hexadecimal representation;

   -`asm`  manually written assembly code in Intel ASM format;

   -`S`    manually written assembly code in AT&T Gas format;

   -`s`    assembly code in AT&T Gas format generated by the compiler (GCC);

   -`o`    object code produced by the assembler;

   -`i`    pre-processed source code generated by the pre-processor (CPP)

   -`bin`  flat-binary file generated by the linker;

   -`iso`  ISO9660 (ECMA-119) file system intended for optical disk media (CD) 

   -`ld`   linker script.

 Suffixes:

   - `-alpha`     wrong or incomplete implementation to exemplify problems
   - `-beta`      working example, but suboptimal or inelegant implementation
   - (no suffix)  working, intended implementation

 * Comments are text. Use caption and punctuation accordingly.

 Contribution licensing
 ------------------------------

 If you have substantially modified an existing source or documentation
 file --- say  it's considerably more than a simple typo correction or
 small bug fix --- you are entitled to have your name added to the copyright
 notice and to the `AUTHORS` file, should you like so.

 By submitting your contribution you agree that it will be available under the
 same license as SYSeg (GNU GPL vr. 3 or later).

 Code of conduct
 ------------------------------

 Just be considerate and inclusive face diversity.

 ..it happens
 ------------------------------

 SYSeg contains source-code examples and implementation challenges collected
 by the author from class notes and programming exercises throughout the teaching
 practice in undergraduate courses in Computer Sciences and Engineering. As such
 the material is a work-in-progress endeavor and may contain (or, certainly
 contains) incomplete, suboptimal, or even imperfect code. Let's hope not, but 
 potential inaccuracy in technical explanations are not guaranteed not to
 happen as result of reliance on misleading references or imprecise
 documentation.

 If you ever detect one such problem, it would be great if you could drop the
 author a note. Your input will be very appreciated, as it will help to improve
 the material. Special thanks shall be gratefully engraved in the source comments
 and documentation.

 Project standards
 ------------------------------

 To keep things consistent, when applicable, we aim at some some standards.

 - REUSE specification vr. 3 [1]
 
 - GitFlow branching strategy [2]

 - Semantic versioning 2.0.0 [3]

 - Conventional Commits 1.0.0 [4] (see types bellow)

 - Keep a ChangeLog [5]

 Complementary notes:

 Permanent branch names:

 `main` (former `master`) and `dev` (for GitFlow `develop`)
 
 Commit messages

 `<type>/issue-number/descriptive-words

 where `<type>` is one of

 - `fix`:   fix a bug
 - `feat`:  add new feature
 - `build`: changes affecting the build 
 - `perf`:  tidy code (other than the above) and repository
 - `doc`:   modify internal or external documentation
 - `test`:  add or modify tests
 - `tmp`:   a temporary branch for some other purpose (not PR/MR)

 Branch names:

 `<purpose>/<issue number>/<short-descriptive-mnemonic>`

 where `purpose` is one of the following:

 * `feature`:   adding, modifying or removing a feature
 * `bugfix`:    fixes a bug in the development branch
 * `hotfix`:    fixes a but in the public (main) branch
 * `wip`   :    work-in-progress (to be converted when done)

 References
 ------------------------------

 [1] REUSE Software, https://reuse.software

 [2] GitFlow, https://nvie.com/posts/a-successful-git-branching-model/

 [3] Semantic Versioning, https://semver.org/

 [4] Conventional Commits, https://www.conventionalcommits.org/en/v1.0.0/

 [5] Keep a ChangeLog, https://keepachangelog.com/en/1.0.0/

